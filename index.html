<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-angularjs-apply-数据绑定" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/14/angularjs-apply-数据绑定/" class="article-date">
  <time datetime="2016-07-14T09:54:18.000Z" itemprop="datePublished">2016-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/14/angularjs-apply-数据绑定/">angularjs $apply 数据绑定</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://hudeyong926.iteye.com/blog/2071719" target="_blank" rel="external">$apply</a><br>js代码都是顺序执行的，如果遇到异步执行，并且带有返回值，angularjs是怎么处理的呢？下面以实例详细说明一下$apply的功能。<br>1，angularjs数据绑定了，但是没有在html中显示出来<br>因为所有的都在ng-的事件会触发显示，虽然值变了，没有ng-触发<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">phonecatControllers.controller(<span class="string">'PhoneDetailCtrl'</span>, [<span class="string">'$scope'</span>, <span class="string">'$routeParams'</span>,  </span><br><span class="line">  <span class="keyword">function</span>(<span class="variable">$scope</span>, <span class="variable">$routeParams</span>) &#123;  </span><br><span class="line">     <span class="variable">$scope</span>.user = <span class="string">''</span>;  </span><br><span class="line">     <span class="variable">$scope</span>.test = <span class="function"><span class="title">function</span></span>() &#123;  </span><br><span class="line">         <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span> () &#123;  </span><br><span class="line">             <span class="variable">$scope</span>.user = <span class="string">"good"</span>;  </span><br><span class="line">         &#125;, 2000);  </span><br><span class="line">     &#125;  </span><br><span class="line">  </span><br><span class="line">     <span class="variable">$scope</span>.test1 = <span class="function"><span class="title">function</span></span>() &#123;  </span><br><span class="line">          <span class="variable">$scope</span>.user = <span class="string">'tank'</span>;  </span><br><span class="line">     &#125;  </span><br><span class="line">  </span><br><span class="line">     <span class="variable">$scope</span>.test1();  </span><br><span class="line">     <span class="variable">$scope</span>.test();  </span><br><span class="line">  </span><br><span class="line">     console.log(<span class="variable">$scope</span>);  </span><br><span class="line">  &#125;  </span><br><span class="line">]);</span><br></pre></td></tr></table></figure></p>
<p>上例解释：<br>正常理解是：在html显示tank，2秒后，会变成good。<br>实际情况是：html显示tank，2秒后，不会成good。<br>我开始以为是setTimeout里面的程序并没有执行，但是我用console.log($scope);发现$scope.user值改变了，是good，但是为什么没有在html里面体现出来呢。<br>怎么样才能让html中的自动变呢。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$scope</span>.test = <span class="function"><span class="title">function</span></span>() &#123;  </span><br><span class="line">    <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span> () &#123;  </span><br><span class="line">        <span class="variable">$scope</span>.<span class="variable">$apply</span>(<span class="function"><span class="title">function</span></span> () &#123;  </span><br><span class="line">            <span class="variable">$scope</span>.user = <span class="string">"good"</span>;  </span><br><span class="line">        &#125;);  </span><br><span class="line">    &#125;, 2000);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样就可以了，在html显示tank，2秒后，会变成good。<br>2，第三方登录，登录成功后，读取返回值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$scope</span>.getUserInfo = <span class="keyword">function</span>(response)&#123;  </span><br><span class="line">    FB.api(<span class="string">'/me'</span>, <span class="keyword">function</span>(response1) &#123;  </span><br><span class="line">        <span class="variable">$scope</span>.<span class="variable">$apply</span>(<span class="function"><span class="title">function</span></span>() &#123;  </span><br><span class="line">            <span class="variable">$scope</span>.user = &#123; <span class="string">'AccessToken'</span>:response.authResponse.accessToken,  </span><br><span class="line">                            <span class="string">'facebook_uid'</span>:response.authResponse.userID,  </span><br><span class="line">                            <span class="string">'name'</span>:response1.name  </span><br><span class="line">                          &#125;  </span><br><span class="line">        &#125;);  </span><br><span class="line">    &#125;);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>登录到成功后，从第三方api接口，读取个人信息，也是一个异步的过程。感觉$apply，就是为了异步负值用的。</p>
<p>感觉$apply，就是为了异步负值用的。这句话 应该是不对的，$apply的作用应该是把JavaScript的执行环境 移到 Angular的上下文中。<br>参见<br><img src="/images/angular-runtime-02.png" alt="angular-runtime-02"></p>
<blockquote>
<p> <code>$apply()</code> is used to execute an expression in angular from outside of the angular framework.(For example from browser DOM events, setTimeout, XHR or third party libraries).Because we are calling into the angular framework we need to perform proper scope life-cycle of {@link ng.$exceptionHandler exception handling},<br>       {@link ng.$rootScope.Scope#$digest executing watches}.</p>
</blockquote>
<pre><code># Pseudo-Code of `$apply()`
    &lt;pre&gt;
       function $apply(expr) {
         try {
           return $eval(expr);
         } catch (e) {
           $exceptionHandler(e);
         } finally {
           $root.$digest();
         }
       }
   &lt;/pre&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/14/angularjs-apply-数据绑定/" data-id="ciqm65j3500071oamobzmjcwu" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/">Angular</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="&#39;angularjs-数据绑定" class="article article-type-&#39;angularjs" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/14/数据绑定/" class="article-date">
  <time datetime="2016-07-14T09:53:12.000Z" itemprop="datePublished">2016-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/14/数据绑定/">数据绑定&#39;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/14/数据绑定/" data-id="ciqm65j48000m1oamh0y28z7r" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Angular中使用-watch监听模型变化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/14/Angular中使用-watch监听模型变化/" class="article-date">
  <time datetime="2016-07-14T07:39:42.000Z" itemprop="datePublished">2016-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/14/Angular中使用-watch监听模型变化/">&#39;Angular中使用$watch监听模型变化&#39;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/14/Angular中使用-watch监听模型变化/" data-id="ciqm65j2b00001oamrs48nhip" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-canvas-fan-shaped" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/13/canvas-fan-shaped/" class="article-date">
  <time datetime="2016-07-13T10:28:41.000Z" itemprop="datePublished">2016-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/13/canvas-fan-shaped/">&#39;canvas-fan-shaped&#39;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/13/canvas-fan-shaped/" data-id="ciqm65j3u000g1oam97330m5m" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-canvas-ImageData" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/13/canvas-ImageData/" class="article-date">
  <time datetime="2016-07-13T09:01:33.000Z" itemprop="datePublished">2016-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/13/canvas-ImageData/">&#39;canvas-ImageData&#39;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/13/canvas-ImageData/" data-id="ciqm65j3p000c1oam2xesd941" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-canvas-drawImage" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/13/canvas-drawImage/" class="article-date">
  <time datetime="2016-07-13T08:08:20.000Z" itemprop="datePublished">2016-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/13/canvas-drawImage/">&#39;canvas-drawImage&#39;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/13/canvas-drawImage/" data-id="ciqm65j3s000e1oamzph5i9r2" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-iFrame" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/05/iFrame/" class="article-date">
  <time datetime="2016-07-05T02:17:15.000Z" itemprop="datePublished">2016-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/05/iFrame/">&#39;iFrame&#39;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>外部CSS可以控制IFRAME内的样式吗？<br>1、iframe里的也是一个独立的网页，只有它自己的css或它引用的css才对它有效。<br>所以 IFRAME里的样式受被引用的文件的CSS的影响，不受外围文件的CSS影响。<br>　　当然你可以在父页面用js来控制。<br>　　2、使用css可以设置百分比，如width:100%；<br>　　IFRAME 里面的内容是在IFRAME 页面中的，可以使用js精确设置。<br>总结：主页只能控制iframe的位置，大小，边框等等，iframe的样式要写在里面．</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/05/iFrame/" data-id="ciqm65j3z000j1oam12tj8esw" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iFrame/">iFrame</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript事件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/01/JavaScript事件/" class="article-date">
  <time datetime="2016-07-01T02:49:30.000Z" itemprop="datePublished">2016-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/01/JavaScript事件/">&#39;JavaScript事件&#39;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://yujiangshui.com/javascript-event/" target="_blank" rel="external">http://yujiangshui.com/javascript-event/</a></p>
<p>发布（Publish）和订阅（Subscribe）模式</p>
<p>针对上面这种用法，继续抽象一下，就是发布和订阅开发模式。正如其名，这种模式有两个角色：<strong>发布者和订阅者，此外有一条信道</strong>，<br><strong>发布者被触发往这个信道里面发信，订阅者从这个信道里面收信，如果收到特定信件则执行某个对应的逻辑</strong>。这样，发布者和订阅者之间是完全解耦的，<br>只有一条信道连接。这样就非常容易扩展，也不会引入额外的依赖。</p>
<p>这样如果需要添加新功能，只需要添加一个新的订阅者（及其执行逻辑），监听信道中某一类新的信件。再在应用中通过发布者发送一类新的信件即可。</p>
<p>具体实现，这里推荐 cowboy 开发的 Tiny Pub Sub <a href="https://github.com/cowboy/jquery-tiny-pubsub.git" target="_blank" rel="external">Tiny Pub Sub</a>，通过 jQuery 实现，非常简洁直观，jQuery 太赞。代码就这几行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>($) &#123;</span><br><span class="line"></span><br><span class="line">  var o = $(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">  $.subscribe = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    o.on.apply(o, arguments);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  $.unsubscribe = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    o.off.apply(o, arguments);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  $.publish = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    o.trigger.apply(o, arguments);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">&#125;(jQuery));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$( <span class="string">"div"</span> ).on( <span class="string">"click"</span>, <span class="keyword">function</span>( event, person ) &#123;</span><br><span class="line">  alert( <span class="string">"Hello, "</span> + person.name );</span><br><span class="line">&#125;);</span><br><span class="line">$( <span class="string">"div"</span> ).trigger( <span class="string">"click"</span>, &#123; name: <span class="string">"Jim"</span> &#125; );</span><br></pre></td></tr></table></figure></p>
<p>定义一个对象作为信道，然后提供了三个方法，订阅者、取消订阅、发布者。</p>
<p>demo:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"jquery.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">"dist/tiny-pubsub.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// Creates a <span class="string">"named"</span> logging function.</span><br><span class="line"><span class="keyword">function</span> createLogger(name) &#123;</span><br><span class="line">  <span class="built_in">return</span> <span class="keyword">function</span>(_, a, b) &#123;</span><br><span class="line">    // Skip the first argument (event object) but <span class="built_in">log</span> the name and other args.</span><br><span class="line">    console.log(name, a, b);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Subscribe to the <span class="string">"foo"</span> topic (<span class="built_in">bind</span> to the <span class="string">"foo"</span> event, no namespace).</span><br><span class="line">$.subscribe(<span class="string">'foo'</span>, createLogger(<span class="string">'foo'</span>));</span><br><span class="line">// Subscribe to the <span class="string">"foo.bar"</span> topic (<span class="built_in">bind</span> to the <span class="string">"foo"</span> event, <span class="string">"bar"</span> namespace).</span><br><span class="line">$.subscribe(<span class="string">'foo.bar'</span>, createLogger(<span class="string">'foo.bar'</span>));</span><br><span class="line">// Subscribe to the <span class="string">"foo.baz"</span> topic (<span class="built_in">bind</span> to the <span class="string">"foo"</span> event, <span class="string">"baz"</span> namespace).</span><br><span class="line">$.subscribe(<span class="string">'foo.baz'</span>, createLogger(<span class="string">'foo.baz'</span>));</span><br><span class="line"></span><br><span class="line">// Publish arbitrary values.</span><br><span class="line">$.publish(<span class="string">'foo'</span>, [1, 2]);</span><br><span class="line">// logs:</span><br><span class="line">// foo 1 2</span><br><span class="line">// foo.bar 1 2</span><br><span class="line">// foo.baz 1 2</span><br><span class="line"></span><br><span class="line">$.publish(<span class="string">'foo.bar'</span>, [3, 4]);</span><br><span class="line">// logs:</span><br><span class="line">// foo.bar 3 4</span><br><span class="line"></span><br><span class="line">$.publish(<span class="string">'foo.baz'</span>, [5, 6]);</span><br><span class="line">// logs:</span><br><span class="line">// foo.baz 5 6</span><br><span class="line"></span><br><span class="line">$.unsubscribe(<span class="string">'foo.bar'</span>);</span><br><span class="line">$.publish(<span class="string">'foo'</span>, [7, 8]);</span><br><span class="line">// logs:</span><br><span class="line">// foo 7 8</span><br><span class="line">// foo.baz 7 8</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>说明：<br>apply() 方法在指定 this 值和参数（参数以数组或类数组对象的形式存在）的情况下调用某个函数。<br>参数</p>
<p>thisArg<br>在 fun 函数运行时指定的 this 值。需要注意的是，指定的 this 值并不一定是该函数执行时真正的 this 值，如果这个函数处于非严格模式下，则指定为 null 或 undefined 时会自动指向全局对象（浏览器中就是window对象），同时值为原始值（数字，字符串，布尔值）的 this 会指向该原始值的自动包装对象。<br>argsArray<br>一个数组或者类数组对象，其中的数组元素将作为单独的参数传给 fun 函数。如果该参数的值为null 或 undefined，则表示不需要传入任何参数。从ECMAScript 5 开始可以使用类数组对象。浏览器兼容性请参阅本文底部内容。</p>
<p>注意：该函数的语法与call()方法的语法几乎完全相同，唯一的区别在于，call()方法接受的是一个参数列表，而apply()方法接受的是一个包含多个参数的数组（或类数组对象）。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/01/JavaScript事件/" data-id="ciqm65j3x000i1oamh03onon8" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript事件/">JavaScript事件</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ES6-For-of-循环" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/24/ES6-For-of-循环/" class="article-date">
  <time datetime="2016-06-24T08:00:43.000Z" itemprop="datePublished">2016-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/24/ES6-For-of-循环/">ES6-For of 循环</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ES2015-for-of循环"><a href="#ES2015-for-of循环" class="headerlink" title="ES2015 for of循环:"></a>ES2015 for of循环:</h2><p>for of是ES2015新增，它能够遍历所有具有遍历器接口的数据结构。<br>本质上，for of是通过遍历器对象来遍历对应的数据结构，所以只要数据结构能够生成遍历器对象，那么for of循环就可以遍历此数据结构。<br>关于遍历器接口可以参阅ES2015 Iterator遍历器一章节。<br>实现遍历器接口的数据结构如下:<br>（1）.数组<br>（2）.某些类数组<br>（3）.Map<br>（4）.Set<br>类数组对象主要有arguments、DOM NodeList和字符串。<br>代码实例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4];</span><br><span class="line">for(let elem of arr) &#123;</span><br><span class="line">  console.log(elem);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的代码可以遍历数组中的每一个成员。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function func(a, b) &#123;</span><br><span class="line">  let it = arguments[Symbol.iterator]();</span><br><span class="line">  for(let arg of it) &#123;</span><br><span class="line">    console.log(arg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">func(1, 2);</span><br></pre></td></tr></table></figure></p>
<p>上面的代码是遍历arguments类数组对象。<br>我们可以直接操作arguments对象，而不是它的遍历器对象，这里只是说明它是具有遍历器接口的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var mapData = new Map([[&quot;webName&quot;, &quot;eqxiu&quot;], [&quot;url&quot;, &quot;http://www.eqxiu.com/&quot;]]);</span><br><span class="line">for(let elem of mapData) &#123;</span><br><span class="line">  console.log(elem);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的代码是遍历Map数据结构。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var set = new Set([1, 2, 3, 4, 2, 8, 4]);</span><br><span class="line">var arr = [...set];</span><br><span class="line">console.log(arr);</span><br></pre></td></tr></table></figure></p>
<p>上面的代码是遍历Set数据结构。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function *test()&#123;</span><br><span class="line">  yield 1;</span><br><span class="line">  yield 2;</span><br><span class="line">  yield 3;</span><br><span class="line">  yield 4;</span><br><span class="line">&#125;</span><br><span class="line">let g=test();</span><br><span class="line">for(let elem of g)&#123;</span><br><span class="line">  console.log(elem);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面代码实现了对Generator函数数据结构的遍历操作。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;test&quot;;</span><br><span class="line">for(let char of str) &#123;</span><br><span class="line">  console.log(char);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>字符串也具有遍历器接口，使用for of可以它的每一个字符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;\uD842\uDFB7&quot;;</span><br><span class="line">for(let char of str) &#123;</span><br><span class="line">  console.log(char);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>let of能够正确识别32位的UTF-16字符。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/24/ES6-For-of-循环/" data-id="ciqm65j3f00091oamod6niiq8" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ES6-Iterator遍历器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/24/ES6-Iterator遍历器/" class="article-date">
  <time datetime="2016-06-24T06:55:10.000Z" itemprop="datePublished">2016-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/24/ES6-Iterator遍历器/">ES6-Iterator遍历器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ES6 Iterator遍历器:<br>遍历器是一种接口，它为不同的数据结构提供了统一的访问机制。<br>如果一个数据结构具有遍历器接口，那么就可以依次处理该数据结构的成员。<br>当前javascript用来表示集合的数据结构有四种，分别是数组、对象、Set和Map，并且这四种数据结构可以相互嵌套使用，比如数组的成员可以是对象，对象的成员又可以是Set等等。<br>那么具有统一访问机制的遍历器接口的出现就是很容易理解的了。<br><img src="/images/iterator-01.png" alt="iterator-01"></p>
<ol>
<li>遍历器接口:<br>如果一个结构具有Symbol.iterator属性，那么就称这个数据结构具有遍历器接口。<br>Symbol.iterator 返回Symbol对象的iterator属性，这是一个预定义好的、类型为Symbol的特殊值。<br>Symbol.iterator 属性指向一个方法，调用此方法返回一个遍历器对象，它是一个指针对象，默认指向数据结构的起始位置。<br>下面就以数组为例，对此做一下介绍:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4];</span><br><span class="line">console.log(arr[Symbol.iterator]);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>上面的代码可以说明，Symbol.iterator确实是指向数组的一个方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4];</span><br><span class="line">let it = arr[Symbol.iterator]();</span><br><span class="line">console.log(it.next());</span><br><span class="line">console.log(it.next());</span><br><span class="line">console.log(it.next());</span><br><span class="line">console.log(it.next());</span><br><span class="line">console.log(it.next());</span><br></pre></td></tr></table></figure></p>
<p>调用遍历器接口会返回一个遍历器对象，它是一个指针对象，默认指向数据结构的起始位置。<br>（1）.第一次调用next()，可以将指针指向数据结构（这里是数组）第一个成员。<br>（2）.第二次调用指向第二个成员，以此类推，直到数据结构的结尾。<br>每一次调用next()方法都会返回一个对象，此对象包含value和done属性，value属性值是数据结构成员的值，如果遍历完成value属性值为undefined；done属性是一个布尔值，如果为true，说明遍历完成，如果为false，说明遍历尚未完成。<br>上面的代码可以模拟如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4];</span><br><span class="line">function makeIterator(array) &#123;</span><br><span class="line">  var nextIndex = 0;</span><br><span class="line">  return &#123;</span><br><span class="line">    next: function () &#123;</span><br><span class="line">      return nextIndex &lt; array.length ?</span><br><span class="line">        &#123; value: array[nextIndex++], done: false &#125; :</span><br><span class="line">        &#123; value: undefined, done: true &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">let it = makeIterator(arr);</span><br><span class="line">console.log(it.next());</span><br><span class="line">console.log(it.next());</span><br><span class="line">console.log(it.next());</span><br><span class="line">console.log(it.next());</span><br><span class="line">console.log(it.next());</span><br></pre></td></tr></table></figure></p>
<ol>
<li>默认具有遍历器接口的数据结构:<br>遍历器接口目的是为数据结构提供一种统一的访问机制，也就是可以使用for of循环遍历。<br>当对一个数据结构使用for of循环遍历的时候，会自动调用遍历器接口。<br>ES2015中有四类数据结构默认具有遍历器接口:<br>（1）.数组<br>（2）.某些类数组<br>（3）.Map<br>（4）.Set<br>Object对象默认没有遍历器接口，当然我们可以给它提供:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123;</span><br><span class="line">  data: [1, 2, 3, 4],</span><br><span class="line">  [Symbol.iterator]() &#123;</span><br><span class="line">    const self = this;</span><br><span class="line">    let index = 0;</span><br><span class="line">    return &#123;</span><br><span class="line">      next() &#123;</span><br><span class="line">        if (index &lt; self.data.length) &#123;</span><br><span class="line">          return &#123; value: self.data[index++],done: false&#125;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          return &#123; value: undefined, done: true &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">let it = obj[Symbol.iterator]();</span><br><span class="line">console.log(it.next().value)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>上面的代码为obj对象添加了一个遍历器接口。<br>对于不具有遍历器接口的类数组对象，为其添加遍历器接口的最简单的方式就是直接添加数组的遍历器接口。<br>代码实例如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123;</span><br><span class="line">  0: 0,</span><br><span class="line">  1: 1,</span><br><span class="line">  2: 2,</span><br><span class="line">  length: 3,</span><br><span class="line">  [Symbol.iterator]: Array.prototype[Symbol.iterator]</span><br><span class="line">&#125;;</span><br><span class="line">for (let elem of obj) &#123;</span><br><span class="line">  console.log(elem);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果遍历器接口调用后返回的不是一个遍历器对象，那么会报错。</p>
<ol>
<li>展开运算符:<br>如果一个数据结构具有遍历器接口，那么除了可以使用for of循环以外，也可以使用展开运算符。<br>代码实例如下:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4];</span><br><span class="line">console.log(...arr);</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/24/ES6-Iterator遍历器/" data-id="ciqm65j2w00041oamyasicm8z" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript事件/">JavaScript事件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iFrame/">iFrame</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习/">学习</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/ES6/" style="font-size: 20px;">ES6</a> <a href="/tags/JavaScript事件/" style="font-size: 10px;">JavaScript事件</a> <a href="/tags/iFrame/" style="font-size: 10px;">iFrame</a> <a href="/tags/学习/" style="font-size: 10px;">学习</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/07/14/angularjs-apply-数据绑定/">angularjs $apply 数据绑定</a>
          </li>
        
          <li>
            <a href="/2016/07/14/数据绑定/">数据绑定&#39;</a>
          </li>
        
          <li>
            <a href="/2016/07/14/Angular中使用-watch监听模型变化/">&#39;Angular中使用$watch监听模型变化&#39;</a>
          </li>
        
          <li>
            <a href="/2016/07/13/canvas-fan-shaped/">&#39;canvas-fan-shaped&#39;</a>
          </li>
        
          <li>
            <a href="/2016/07/13/canvas-ImageData/">&#39;canvas-ImageData&#39;</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 John Doe<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>